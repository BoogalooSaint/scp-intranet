<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SCP Foundation Secure Intranet</title>
<style>
    body { margin:0; font-family:'Courier New', monospace; background:#0a0a0a; color:#e2e2e2; overflow-x:hidden; }

    @keyframes flicker {
        0%,19%,21%,23%,25%,54%,56%,100% {opacity:1;}
        20%,22%,24%,55% {opacity:0.4;}
    }

    .crt { animation:flicker 0.15s infinite; text-shadow:0 0 2px #fff,0 0 5px #0f0,0 0 10px #0f0; }

    .top-banner {
        background:#111; padding:20px; border-bottom:2px solid #a00000;
        display:flex; align-items:center; justify-content:space-between;
    }

    .scp-logo { display:flex; align-items:center; gap:10px; }
    .scp-logo img { width:60px; }
    .title { font-size:26px; font-weight:bold; letter-spacing:2px; color:#d9d9d9; }

    .sidebar {
        position:fixed; left:0; top:70px; width:200px; height:100%; background:#1a1a1a;
        border-right:1px solid #333; padding-top:20px; display:none;
    }

    .sidebar a {
        display:block; padding:15px; color:#e2e2e2; text-decoration:none;
    }
    .sidebar a:hover { background:#a00000; color:#fff; }

    .main { margin-left:220px; padding:20px; display:none; }

    input, button, select {
        width:90%; padding:10px; margin:10px 0; background:#0f0f0f; border:1px solid #444;
        border-radius:5px; color:white;
    }
    button { background:#a00000; border:none; cursor:pointer; font-weight:bold; }
    button:hover { background:#c40000; }

    .terminal-box {
        background:#0f0f0f; border:1px solid #333; padding:20px; border-radius:8px;
        margin-top:20px; position:relative;
    }

    .alert {
        background:red; color:white; font-weight:bold; padding:10px; border-radius:5px;
        margin-bottom:10px; text-align:center; animation:flicker 0.2s infinite;
    }

    .map-zone {
        position:absolute; border:2px solid #0f0; cursor:pointer;
    }

    .map-tooltip {
        position:absolute; background:#111; color:#0f0; padding:5px;
        border:1px solid #0f0; display:none; font-size:12px;
    }
</style>
</head>

<body>

<div class="top-banner">
    <div class="scp-logo">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6f/SCP_Foundation_%28emblem%29.svg">
        <span class="title crt">SCP FOUNDATION SECURE INTRANET</span>
    </div>
</div>

<div class="sidebar" id="sidebar">
    <a href="#" onclick="showSection('dashboardSection')">Dashboard</a>
    <a href="#" onclick="showSection('scpSection')">SCP Database</a>
    <a href="#" onclick="showSection('adminSection')">Admin Panel</a>
    <a href="#" onclick="showSection('userApprovalSection')">User Approvals</a>
    <a href="#" onclick="showSection('logsSection')">D-Class Logs</a>
    <a href="#" onclick="showSection('securitySection')">Security Feeds</a>
    <a href="#" onclick="showSection('mapSection')">Site-19 Map</a>
    <a href="#" onclick="showSection('discordSection')">Connect Discord</a>
    <a href="#" onclick="triggerRedAlert()">Red Alert</a>
    <a href="#" onclick="logout()">Logout</a>
</div>

<div class="main" id="mainContent">

    <div id="dashboardSection" class="terminal-box" style="display:none;">
        <h1>Welcome, <span id="personName"></span></h1>
        <h3>Clearance Level: <span id="personLevel"></span></h3>
    </div>

    <div id="scpSection" class="terminal-box" style="display:none;">
        <h2>SCP Database Terminal</h2>
        <input type="text" id="scpQuery" placeholder="Enter SCP number (e.g., SCP-173)">
        <button onclick="searchSCP()">ACCESS FILE</button>
        <div id="scpOutput" style="margin-top:20px;"></div>
    </div>

    <div id="adminSection" class="terminal-box" style="display:none;">
        <h2>Admin Panel</h2>
        <input type="text" id="newSCPNumber" placeholder="SCP Number">
        <input type="text" id="newSCPClass" placeholder="Object Class">
        <input type="text" id="newSCPDesc" placeholder="Description">
        <button onclick="addSCP()">Add SCP</button>
    </div>

    <div id="userApprovalSection" class="terminal-box" style="display:none;">
        <h2>User Approval Terminal</h2>
        <div id="pendingUsers"></div>
        <button onclick="approveUser()">Approve Selected User</button>
    </div>

    <div id="logsSection" class="terminal-box" style="display:none;">
        <h2>D-Class Experiment Logs</h2>
        <div id="experimentLogs"></div>
        <button onclick="addRandomExperiment()">Generate Experiment Entry</button>
    </div>

    <div id="securitySection" class="terminal-box" style="display:none;">
        <h2>Security Camera Feeds</h2>
        <div style="background:#111; height:200px; text-align:center; padding-top:80px;">Camera feed placeholder</div>
    </div>

    <div id="mapSection" class="terminal-box" style="display:none; height:400px;">
        <h2>Site-19 Interactive Facility Map</h2>
        <div id="facilityMap" style="background:#111; width:100%; height:100%; position:relative;">
            <div class="map-zone" style="top:50px; left:50px; width:100px; height:80px;" data-zone="Containment Wing"></div>
            <div class="map-zone" style="top:150px; left:200px; width:120px; height:90px;" data-zone="Research Labs"></div>
            <div id="mapTooltip" class="map-tooltip"></div>
        </div>
    </div>

    <div id="discordSection" class="terminal-box" style="display:none;">
        <h2>Connect Your Discord Account</h2>
        <button onclick="connectDiscord()">Connect Discord</button>
        <div id="discordStatus" style="margin-top:10px;color:#0f0;"></div>
    </div>

    <div id="alertBox" class="alert" style="display:none;">CONTAINMENT BREACH RED ALERT!</div>

</div>

<!-- LOGIN -->
<div id="loginScreen" class="terminal-box" style="width:400px; margin:100px auto;">
    <h2>Personnel Login Terminal</h2>
    <input type="text" id="loginUser" placeholder="Username">
    <input type="password" id="loginPass" placeholder="Password">
    <button onclick="login()">LOGIN</button>
    <p id="loginError" style="color:red;"></p>
    <p>New personnel? <a href="#" onclick="showSignup()" style="color:#a00000;">Request Access</a></p>
</div>

<!-- SIGNUP -->
<div id="signupScreen" class="terminal-box" style="display:none; width:400px; margin:100px auto;">
    <h2>Personnel Registration</h2>
    <input type="text" id="newUser" placeholder="Desired Username">
    <input type="password" id="newPass" placeholder="Password">
    <select id="newClearance">
        <option value="">Clearance Level</option>
        <option value="1">Level 1</option>
        <option value="2">Level 2</option>
        <option value="3">Level 3</option>
        <option value="4">Level 4</option>
        <option value="5">Level 5</option>
    </select>
    <button onclick="signup()">REGISTER</button>
    <p id="signupError" style="color:red;"></p>
    <p><a href="#" onclick="showLogin()" style="color:#a00000;">Back to Login</a></p>
</div>

<script>
let users=[
    {username:"admin",password:"admin123",clearance:5},
    {username:"Saint",password:"Boogaloo",clearance:5,owner:true}
];

let pendingUsers=[];
let scps=[
    {number:"SCP-173",class:"Euclid",desc:"Moves at incredible speeds when not observed."},
    {number:"SCP-049",class:"Euclid",desc:"Believes itself to be a doctor; performs lethal cures."},
    {number:"SCP-096",class:"Euclid",desc:"Kills anyone who views its face."},
    {number:"SCP-682",class:"Keter",desc:"Highly intelligent, unkillable reptile."}
];

function signup(){
    let username=document.getElementById('newUser').value;
    let password=document.getElementById('newPass').value;
    let clearance=document.getElementById('newClearance').value;

    if(!username||!password||!clearance){
        document.getElementById('signupError').innerText="All fields required.";
        return;
    }

    pendingUsers.push({username,password,clearance});
    document.getElementById('signupError').innerText="Request submitted.";
}

function login(){
    let u=document.getElementById('loginUser').value;
    let p=document.getElementById('loginPass').value;

    let found=users.find(x=>x.username===u && x.password===p);

    if(!found){
        document.getElementById('loginError').innerText="Invalid credentials.";
        return;
    }

    localStorage.setItem('user',JSON.stringify(found));
    loadDashboard();
}

function loadDashboard(){
    let user=JSON.parse(localStorage.getItem('user'));
    if(!user) return;

    document.getElementById("loginScreen").style.display="none";
    document.getElementById("signupScreen").style.display="none";
    document.getElementById("sidebar").style.display="block";
    document.getElementById("mainContent").style.display="block";

    document.getElementById("personName").innerText=user.username;
    document.getElementById("personLevel").innerText=user.clearance;

    showSection('dashboardSection');
}

function showSignup(){
    document.getElementById("loginScreen").style.display="none";
    document.getElementById("signupScreen").style.display="block";
}
function showLogin(){
    document.getElementById("signupScreen").style.display="none";
    document.getElementById("loginScreen").style.display="block";
}

function logout(){
    localStorage.removeItem('user');
    location.reload();
}

function showSection(id){
    let sections=[
        'dashboardSection','scpSection','adminSection','userApprovalSection',
        'logsSection','securitySection','mapSection','discordSection'
    ];
    sections.forEach(x=>document.getElementById(x).style.display="none");
    document.getElementById(id).style.display="block";

    if(id==="userApprovalSection") loadPendingUsers();
}

function loadPendingUsers(){
    let div=document.getElementById("pendingUsers");
    div.innerHTML="";
    pendingUsers.forEach((u,i)=>{
        div.innerHTML+=`
            <label>
                <input type="radio" name="pendingUser" value="${i}">
                ${u.username} - Level ${u.clearance}
            </label><br>
        `;
    });
}

function approveUser(){
    let sel=document.querySelector('input[name="pendingUser"]:checked');
    if(!sel) return;
    let user=pendingUsers[sel.value];

    users.push(user);
    pendingUsers.splice(sel.value,1);

    loadPendingUsers();
    alert("User approved.");
}

function searchSCP(){
    let query=document.getElementById("scpQuery").value.trim().toLowerCase();
    let scp=scps.find(x=>x.number.toLowerCase()===query);

    let out=document.getElementById("scpOutput");
    if(!scp){
        out.innerHTML="<p>SCP not found.</p>";
        return;
    }

    out.innerHTML=`
        <h3>${scp.number}</h3>
        <p>Class: ${scp.class}</p>
        <p>${scp.desc}</p>
    `;
}

function addSCP(){
    let num=document.getElementById("newSCPNumber").value;
    let cls=document.getElementById("newSCPClass").value;
    let desc=document.getElementById("newSCPDesc").value;

    if(!num||!cls||!desc){
        alert("All fields required.");
        return;
    }

    scps.push({number:num,class:cls,desc:desc});
    alert("Added!");
}

function triggerRedAlert(){
    document.getElementById("alertBox").style.display="block";
}

function connectDiscord(){
    let user=JSON.parse(localStorage.getItem('user'));
    document.getElementById("discordStatus").innerText=
        `Discord linked for ${user.username}!`;
}
</script>

</body>
</html>
